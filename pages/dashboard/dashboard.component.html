<!--<app-detalle></app-detalle>
<app-reporte></app-reporte>-->


<div class="card border-primary">
  <!--<div class="card-header bg-primary">
    <strong>Consulta de DPMN / CCMN</strong>
  </div>-->
  <div class="card-body">
    <form id="formConsulta" [formGroup]="consultaForm" name="formConsulta" class="row row-cols-lg-auto g-3 align-items-center">
      <div class="formgrid grid">
        <div class="field col-12 md:col-12">
        </div>
        <!--Row 1-->
        <div class="field col-12 md:col-2">
          <label>Empresa de Transporte: </label>
        </div>
       <div  class="field col-12 md:col-2" *ngIf="tipoOrigen=='IA'">
          <input type="text" class="form-control" id="txtCodEmprTrans" formControlName="codEmprTrans" pKeyFilter="pint"
            placeholder="Código" maxlength="6" (blur)="buscarEmprTrans()" [hidden]="!esVisible" [readonly]="!esVisible" >
        </div>
         
          <div class="field col-12 md:col-2" *ngIf="tipoOrigen=='IA'  else noIntranet">
            <input type="text" class="form-control" id="txtNumeroRucEmprTrans" formControlName="numeroRucEmprTrans"
              pKeyFilter="pint" placeholder="Número de RUC" maxlength="11" (blur)="buscarRUC('1')" [readonly]="!esVisible">
          </div>
          <ng-template #noIntranet>
            <div class="field col-12 md:col-4">
          <input type="text" class="form-control" id="txtNumeroRucEmprTrans" formControlName="numeroRucEmprTrans"
            pKeyFilter="pint" placeholder="Número de RUC" maxlength="11"  (blur)="buscarRUC('1')" readonly>
        </div>
          </ng-template>
        <div class="field col-12 md:col-6">
          <input type="text" class="form-control" readonly placeholder="Razón Social" formControlName="descRazonSocialEmprTrans"/>
        </div>

        <!--Row 2-->
        <div class="field col-12 md:col-2">
          <label>Tipo de Documento: </label>
        </div>
        <div class="field col-12 md:col-2">
          <p-dropdown inputId="tipoDoc" [options]="lstTipoDocumento" formControlName="tipoDocumento" placeholder="Seleccionar"
            optionLabel="descripcion" optionValue="codigo" (onChange)="onChangeTipoDoc()"></p-dropdown>
        </div>
        <div class="field col-12 md:col-2">
          <label>Estado del documento: </label>
        </div>
        <div class="field col-12 md:col-2">
          <p-dropdown [style]="{'width':'180px'}" inputId="estado" [options]="lstEstados" formControlName="estado" placeholder="Seleccionar"
            optionLabel="descripcion" optionValue="codigo"></p-dropdown>
        </div>
        <div class="field col-12 md:col-2">
          <label>Tipo de Control: </label>
        </div>
        <div class="field col-12 md:col-2">
          <p-dropdown inputId="tipoCont" [options]="lstTipoControl" formControlName="tipoControl" placeholder="Seleccionar"
            optionLabel="descripcion" optionValue="codigo"></p-dropdown>
        </div>

        <!--Row 3-->
        <div class="field col-12 md:col-2">
          <label>Placa de vehículo: </label>
        </div>
        <div class="field col-12 md:col-4">
          <p-dropdown [filter]="true"  inputId="paisPlaca" [options]="lstPaisVehiculo" formControlName="codPaisPlaca" placeholder="Seleccionar"
            optionLabel="descripcion" optionValue="codigo"></p-dropdown>
        </div>
        <!--<div class="col-12 xl:col-4"> 
          <p-cascadeSelect [(ngModel)]="selectedCity1" [options]="countries"  optionLabel="cname" optionGroupLabel="name" formControlName="codPaisPlaca" 
          [optionGroupChildren]="['cities']" [style]="{'minWidth': '14rem'}" placeholder="Pais placa">
        </p-cascadeSelect>
        </div>-->
        <div class="field col-12 md:col-6">
          <input type="text" class="form-control" id="txtNumPlaca" formControlName="numPlaca" 
          placeholder="Número de Placa" maxlength="8" (blur)="validarPlaca()">
        </div>

        <!--Row 4-->
        <div class="field col-12 md:col-2">
          <p-radioButton (onClick)="onRadioChange()" name="tipoBusqueda" value="1" label="Número de Documento:" formControlName="tipoBusqueda"></p-radioButton>
        </div>
        <div class="field col-12 md:col-4">
          <p-dropdown inputId="codAduanaDocumento" [options]="lstAduanaDocumento" formControlName="codAduanaDocumento" placeholder="Seleccionar"
            optionLabel="descripcion" optionValue="codigo" (onChange)="cargarPuestoControl()"></p-dropdown>
        </div>
        
        <div class="field col-12 md:col-2">
          <p-dropdown inputId="codPuestoControl" [hidden]="!esVisible" [options]="lstPuestoControl" formControlName="codPuestoControl" placeholder="Seleccionar"
            optionLabel="descripcion" optionValue="codigo"></p-dropdown>
        </div>
        <div class="field col-12 md:col-2">
          <input type="text" class="form-control" id="txtAnoDocumento" formControlName="anoDocumento" (blur)="validarAnioDocumento()"
          pKeyFilter="pint" placeholder="Año" maxlength="4">
        </div>
        <div class="field col-12 md:col-2">
          <input type="text" class="form-control" id="txtNumeroDocumento" formControlName="numeroDocumento"
          pKeyFilter="pint" placeholder="Número" [maxLength]="maxLengthNumDoc">
        </div>

        <!--Row 5-->
        <div class="field col-12 md:col-2">
          <label>RUC Remitente: </label>
        </div>
        <div class="field col-12 md:col-4">
          <input type="text" class="form-control" id="txtNumeroRucRemitente" formControlName="numeroRucRemitente"
            pKeyFilter="pint" placeholder="Número de RUC" maxlength="11" (blur)="buscarRUC('2')">
        </div>
        <div class="field col-12 md:col-6">
          <input type="text" class="form-control" readonly placeholder="Razón Social" formControlName="descRazonSocialRemitente"/>
        </div>

        <!--Row 6-->
        <div class="field col-12 md:col-2">
          <p-radioButton (onClick)="onRadioChange()" name="tipoBusqueda" value="2" label="Declaración:" formControlName="tipoBusqueda"></p-radioButton>
        </div>
        <div class="field col-12 md:col-4">
          <p-dropdown inputId="codAduanaDAM" [options]="lstAduanaDocumento" formControlName="codAduanaDAM" placeholder="Seleccionar"
            optionLabel="descripcion" optionValue="codigo"></p-dropdown>
        </div>
        <div class="field col-12 md:col-2">
          <input type="text" class="form-control" id="txtAnoDAM" formControlName="anoDAM" (blur)="validarAnioDeclaracion()"
          pKeyFilter="pint" placeholder="Año" maxlength="4">
        </div>
        <div class="field col-12 md:col-2">
          <p-dropdown inputId="codRegimen" [options]="lstRegimen" formControlName="codRegimen" placeholder="Seleccionar"
            optionLabel="descripcion" optionValue="codigo"></p-dropdown>
        </div>
        <div class="field col-12 md:col-2">
          <input type="text" class="form-control" id="txtNumeroDAM" formControlName="numeroDAM"
          pKeyFilter="pint" placeholder="Número" maxlength="6">
        </div>

        <!--Row 7-->
        <div class="field col-12 md:col-2">
          <p-radioButton (onClick)="onRadioChange()" name="tipoBusqueda" value="3" label="Fecha de Registro:" formControlName="tipoBusqueda"></p-radioButton>
        </div>
        <div class="field col-12 md:col-4">
          <p-calendar formControlName="fechaInicio" dateFormat="dd/mm/yy" [maxDate]="date" [showIcon]="true" inputId="icon"></p-calendar>
        </div>
        <div class="field col-12 md:col-4">
          <p-calendar formControlName="fechaFin" dateFormat="dd/mm/yy" [maxDate]="date" [showIcon]="true" inputId="icon"></p-calendar>
        </div>
      </div>
    </form>
  </div>
</div>
<p-toast position="top-right" key="msj"></p-toast>

<div class="field col-12 md:col-12">
</div>
  <div class="botones">
      <p-button class= "ui-button" label="Limpiar" (click)="limpiar()"></p-button>
      <p-button class= "ui-button" label="Consultar" [loading]="loadingConsultar" (click)="consultar()"></p-button>
  </div>

